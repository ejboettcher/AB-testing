{"title":"Power of A/B Testing","markdown":{"yaml":{"title":"Power of A/B Testing","subtitle":"Beyond user feedback","bibliography":"references.bib","author":"Evelyn J. Boettcher","format":{"revealjs":{"incremental":false}},"fig-cap-location":"margin"},"headingText":"A / B Testing","containsRefs":true,"markdown":"\n\n\nA/B testing is a **randomized** controlled experiment. \n\n<br>\nThere are two tests: A and B, in which a single variable adjusted (B Test).\n<br>\n<br>\nThis variation, **might** affect a user's behavior.\n<br>\n\n![](./img/ab.svg)\n\n<br>\n\n### Goal: Increase End User's Objective\n\n* **Business:** Income increases >> Costs of change\n* **Health Care:**  Health increases >> Side effect\n\n:::{.notes}\n* Not explicitly telling users they are in a test\n* \"User\" is loosely used.  It could be servers, Say testing speed: Google vs AWS cloud\n\n:::\n\n---\n\n### Weekly Planner Choices\n\n::::{.columns}\n:::{.column width=\"15%\"}\n:::\n:::{.column width=\"35%\"}\n\n\n#### A\n\n![](img/CIRCA_JOTLET_WEEKLY.webp){width=200}\n\n:::\n:::{.column}\n\n#### B\n\n![](img/stamp-weekly.jpg){width=200}\n\n:::\n:::{.column width=\"15%\"}\n:::\n::::\n\n\n#### So why do A/B Testing\n\n::: {.incremental}\n\n- Why spend the resources to do tests\n- Why risk angering your customers with changes?\n- I got data miners, I do not need tests!\n  - I can find my answers in the data, thank you very much\n- I am a developer, I don't need to know the business side\n\n:::\n\n---\n\n### Life is complicated\n\nSubject matter experts (SME) from Microsoft, Netflixs etc, find when they implement changes \nthat only a small fraction of their ideas have the planned outcome [@sweet].\n\n<br>\nThis is because domain knowledge only gets you so far.\n<br>\n\nEven though we are isolating a single variable, \nthat variable interacts with a million other variables.\n<br>\nYou simply can not model everything or know everything.\n\n::::{.columns}\n:::{.column width=70%}\n\n![](./img/10_lightbulb.webp){width=90%}\n\n:::\n::: {.column width=30%}\n\n<br>\n<br>\n<br>\n\n::: {.incremental}\n\n- #### Implemented changes can hurt business\n\n:::\n:::\n::::\n\n---\n\n## Gedanken: \n\n::::{.columns}\n:::{.column width=70%}\n### Trader Janes has a New Pizza\nSay there is a grocer called Trader Janes and it wants to add a new pizza to its line up.\n<br>\nHowever, they need to keep the same number of types it sells a constant.\nFreezer only holds N pizzas.\n\n<br>\nThey will have to remove one pizza from their lineup to add the new item.\n<br>\n<br>\n<br>\n\n### Typical Work flow\n\n- Marketing asks a _Data Miner_ to rank popularity of pizza.\n- The Data Miner finds the pizza that sells the least.\n- Stores remove that pizza.\n- Stores add new pizza.\n\n:::\n:::{.column width=29%}\n\n![](./img/yummy-pizza-1327587.jpg){width=270,}\n![](./img/marketing.svg)\n:::\n::::\n\n\n[Arjun Kartha's pizza pic](https://www.freeimages.com/photo/yummy-pizza-1327587)\n\n---\n\n::::{.columns}\n:::{.column width=60%}\n\n### New Pizza added!!!\n<br>\n\n\n\n#### Unfortunately:  \n\nA week later sales go down.\n\n<br>\n<br>\n\n:::\n:::{.column width=30%}\n\n![](./img/sales_down.webp)\n\n:::\n::::\n\n### What happened?\n\n::: {.incremental}\n\n- Don't know, because the store implemented many changes that week!\n- It's the week after Thanksgiving and sales always go down that week.\n- Turns out there was a small group of heavy spenders that love this pizza.\n\n:::\n\n<br>\n<br>\n\n\n#### A / B Testing help predict what changes will increase the bottom line.\n\n---\n\n## A / B Testing Limitations\n\nA/B Testing is used to clarify a vision, but does not create vision.\n\n<br>\n\nFor example, an ophthalmologist quickly gives you a set of two choices; \n1 or 2 (2 or 3) that lead to sharpen vision.  Their test, like A/B, can not give you vision.\n\n<br>\n\n\n#### Though without a clarity, </br> a vision has serious limitation.\n\n![](./img/glasses.webp){fig-align=center width=70%}\n\n---\n\n## A/B Testing and DevOps\n\n\n::::{.columns}\n:::{.column width=25%}\n\n<br>\n<br>\n\nHow does A/B testing fit  \ninto the DevOps?\n\n<br>\n<br>\n\n\n\n* (from The Pheonix Project [@pheonix])\n\n:::\n:::{.column width=75%}\n\n### The Three Ways for DevOps \n\n**The First Way:** Principles of Flow\n\n- Making work “visible” by defining a work flow\n\n\n**The Second Way:** Principles of Feedback\n\n- Have fast and constant feedback cycles throughout all stages of a development\n- Don't throw it over the wall \n    \n    \n**Third Way:** Principles of Continuous Learning\n\n- Create a culture of continual learning and experimentation\n  \n:::\n::::\n\n![](./img/devops_ways.svg){fig-align=center width=75%}\n\n\n---\n\n### A/B Testing and the Three ways\n\n![](./img/devops_ways.svg){width=550px}\n\n::::{.columns}\n:::{.column width=65%}\n\n<br>\n\n\nA/B Testing is an extension of the<br> second and third ways.  \nFeedback will be the results of the A/B Testing.\n<br>\n<br>\n\n#### However\n##### Experimentation happens in operations!\n\n:::\n:::{.column width=35%}\n\n![](./img/devops_ways-AB.svg)\n\n:::\n::::\n\n---\n\n## A/B Tests\n### The good, the bad and the ugly\n<br>\n\n\n:::: {.columns }\n::: {.column width=20% }\n:::\n::: {.column width=60% }\n\n\n#### Rewards\n\n- Increased companies goals:\n  - Business: Profits\n  - Healthcare: Health\n  - Defence: Situational Awareness\n  \n:::\n::::\n\n<br>\n\n::::{.columns}\n:::{.column}\n\n#### Risks\n\n- Test cost time and money\n- Don't know what percent of risk is acceptable\n  - Medical and Defence will have lower threshold of risk\n- Upset customers\n- Change makes things worse\n\n\n:::\n:::{.column}\n\n\n#### Mitigation \n\n- Have the smallest test possible\n- 5% False Positive \n- 20% False Negative\n  - Typical of non life critical changes\n- Minimize number of samples\n\n:::\n::::\n\n\n---\n\n<br>\n<br> \n\n### How do you minimize the number of samples?\n\n<br>\n\nWant an N that will have  5% false positive and 20% false negative.\n\n<br>\n\n$$\nN = ?\n$$\n\n---\n\n### Use Statistics \n\n<br>\n\nDefines minimum number of samples (**N**) as:\n\n$$\nN > 2.48 \\left( \\frac{\\sigma_\\Delta}{\\Delta} \\right)^2\n$$\n\n<hr>\n\n- $\\Delta$: How much of a difference is needed to make the change\n  - It cost money to make a change\n  - Increase to bottom line needs to be significant, to accept risk\n    -  _Example_: Trader Janes Pizza needs sales to increase by 3%\n- $\\sigma_\\Delta$: estimated by business logs\n  - $\\sigma_\\Delta$ = $~\\sqrt{2 \\sigma_{log}^2}$\n    - $\\sigma_{log}$: How much does sales fluctuate \n\n---\n\n### Important to note\n\n<br>\n\n#### Unless there is a clear, measurable advantage, no change should occur.\n\n<br>\n\n#### There is no guarantee that change will be effective.\n    \n\n---\n\n<br><br><br>\n\n### Where does 2.48 comes from?\n\n---\n\n## Rules of Thumb: 20 / 5 Rule\n\n<br>\n\n#### Assume there is no difference between A and B\n\n$$\n\\Delta = 0 \\\\\n \\Delta = B - A \n$$\n\n<br>\n<hr>\n::::{.columns}\n:::{.column}\n\n**False positive** \n\n- A is better but, you implemented B\n- incurs an explicit cost\n\n\n<br>\n\n:::\n:::{.column}\n\n**False negative** \n\n- B is better but, you stuck with A\n- incurs an explicit cost\n\n<br>\n\n:::\n::::\n<hr>\n\n::::{.columns}\n:::{.column}\n\n| $\\alpha$ == **False Positive rate** (5%: 1.64)\n\n<br>\n\n| You can assume B is better than A\n\n\n:::\n:::{.column}\n\n| $\\beta$== **False Negative rate** (20%: 0.84)\n\n<br>\n\n| You can assume A is better than B\n\n:::\n::::\n\n---\n\n#### From Standard Normal Distribution\n\n::::{.columns}\n:::{.column width=25%}\n\n\n**Mean** is 0\n\n<br>\n\n**Standard deviation:** <br>\n$\\sigma$ = 1\n\n----\n<br>\n\n| $Z_{score}$ = -1.64 (**5%**)\n\n| $Z_{score}$ = 0.84 (**20%**)\n\n<br>\n\n$$\n1.64 + 0.84 = 2.48\n$$\n\n<br>\n<br>\n<br>\n<br>\n\nGraph from [@norm-dist]\n\n:::\n:::{.column width=74%}\n\n<iframe width=720px height=530px src=\"norm-dist.html\"></iframe>\n\n:::\n::::\n\n---\n\n\n\n\n::::{.columns}\n:::{.column}\n\n### False Positive \n\n| $\\alpha$ == **False Positive rate** (5%: 1.64)\n\n<br>\n\n|  Assume: B is better than A\n\n\n:::\n:::{.column}\n\n### False Negative \n\n| $\\beta$== **False Negative rate** (20%: 0.84)\n\n<br>\n\n| Assume: A is better than B\n\n:::\n::::\n\n<br>\n<br>\n\n\n::::{.columns}\n:::{.column}\n\n\n  \n![](./img/z-score.png){width=450}\n\n:::\n:::{.column}\n\n![](./img/z-score-20.png){width=485}\n\n:::\n::::\n\n---\n\n\n## Quotes\n\nKnowledge discovery in databases (KDD) is the process of discovering useful knowledge from a collection of data.\n\nThe Phoenix Project Quotes Showing 1-30 of 310\n“Improving daily work is even more important than doing daily work.” [@pheonix]\n\n“until code is in production, no value is actually being generated, because it’s merely WIP stuck in the system.” [@pheonix]\n\n“every work center is made up of four things: the machine, the man, the method, and the measures.” [@pheonix]\n\n[@pheonix]\nFramework #1: The Phoenix Project/DevOps Handbook’s Three Ways\nIf you’ve read either The Phoenix Project or The DevOps Handbook, you’ve been introduced to The Three Ways framework for DevOps:\n\nThe First Way: Principles of Flow\nThe Second Way: Principles of Feedback\nThe Third Way: Principles of Continuous Learning\nThe First Way: Principles of Flow\nThe First Way is mostly concerned with accelerating the “flow” of work throughout a process. Gene Kim also refers to the First Way as Systems Thinking in his article The Three Ways: Principles Underpinning DevOps. Whether you’re calling it Flow or Systems Thinking, the principles underpinning the First Way are working toward the same end: viewing the flow of work as one continuous system (unsiloed) that can be continually refined and optimized.\n\nSome of the key principles of the First Way are:\n\nMaking work “visible”. Unlike manufacturing processes, which are easily observable on a plant floor, the flow of software through its development lifecycle is not easily seen.\nUsing methods such as Kanban boards can surface the activities going on behind the scenes, \nby showing the left-to-right movement of a user story through the development phases.\n\nLimiting work-in-progress (WIP). Keeping work-in-progress to a minimum has also been shown to accelerate work flow, because it minimizes multi-tasking and context-switching.\n\nReducing batch sizes. “Chunking” work into smaller pieces like a two-week sprint can also help deliver features (albeit smaller ones) and bug fixes to the customer faster. Issues are often caught earlier when those updates and additions are released sooner.\n\nReducing hand-offs between teams. The risk of “dropping the baton” increases as the hand-offs do. Although hand-offs can’t be completely minimized, the key is to keep the teams in tight communication with one another so that the hand-off itself is almost a non-event rather than a large ordeal with the potential for communication missteps along the way.\n\nIdentifying and removing constraints and waste. Constraints might be bottlenecks in the process, such as environments, test setup, and overly tight architecture, while waste includes things like manual work, heroics, and context-switching.\nThe Second Way: Principles of Feedback\nThe Second Way works to enable fast and constant feedback cycles throughout all stages of a development cycle.\n\nSome of the key principles of the Second Way are:\n\nSwarming and solving problems to build new knowledge. \nThis principle fits into the “fail fast” mentality, so that teams can find issues with an implementation as soon as possible and address them early and often as iterations continue.\n\nPushing quality closer to source. This principle is at the core of the DevSecOps movement, \nwhich is concerned with addressing security concerns during the development cycle, \ninstead of at the end, when rework to remediate is more difficult and costly.\n\nOptimizing for downstream work centers. \nThis principle works against the “throw it over the wall” mentality,\nby underscoring that development should be just as invested in their application being deployable, working with operations to bridge that gap (and vice versa).\nThe Third Way: Principles of Continuous Learning\nThe Third Way seeks to create a culture of continual learning and experimentation within the development organization.\n\nSome of the key principles of the Third Way are:\n\nEnabling organizational learning and a safety culture. Leaders must help “set the tone” for the organization, making it okay to learn, make mistakes, and try again.\n\nInstitutionalizing the improvement of daily work. Improving what you do and how you accomplish it should be part of everyone’s daily thinking and call to action.\n\nTransforming local discoveries to global improvements. Surfacing and sharing improvements at all levels will help enable a “bubble up” culture of continuous improvement.\n\nInjecting resilience patterns into daily work. Some examples might include rehearsing failures, and working toward improving key metrics for deployment.\n\nLeaders enforcing a learning culture. Organization-wide learning is unlikely to take hold and become pervasive unless it is sanctioned and exemplified by its leaders. So being intentional about communicating the value of learning and problem-solving is crucial to building that culture.\n\n### References\n\n::: {#refs}\n:::"},"formats":{"revealjs":{"execute":{"fig-width":10,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":true,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","html-math-method":{"method":"mathjax","url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML-full"},"slide-level":2,"to":"revealjs","css":["evelyn.css"],"incremental":false,"output-file":"talk.html"},"language":{},"metadata":{"lang":"en","fig-responsive":false,"quarto-version":"1.1.141","auto-stretch":true,"jupyter":"python3","theme":["evelyn.scss"],"logo":"img/dayton_gearfilled.png","footer":" Created by Evelyn J. Boettcher (2022)","scrollable":true,"transition":"slide","transitionSpeed":"fast","chalkboard":{"buttons":true},"title":"Power of A/B Testing","subtitle":"Beyond user feedback","bibliography":["references.bib"],"author":"Evelyn J. Boettcher","fig-cap-location":"margin"}}}}